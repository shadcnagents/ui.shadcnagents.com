{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "artifact-canvas",
  "type": "registry:block",
  "description": "",
  "dependencies": [
    "ai",
    "@ai-sdk/react",
    "@ai-sdk/anthropic"
  ],
  "devDependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "artifact-canvas.tsx",
      "type": "registry:component",
      "target": "artifact-canvas.tsx",
      "content": "\"use client\"\n\nimport { useChat } from \"@ai-sdk/react\"\nimport { useState } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport function ArtifactCanvas() {\n  const [tab, setTab] = useState<\"code\" | \"preview\">(\"code\")\n  const [artifact, setArtifact] = useState<{ code: string; lang: string } | null>(null)\n\n  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({\n    api: \"/api/artifact\",\n    onFinish(message) {\n      // Parse code block from assistant response\n      const match = message.content.match(/```(\\w+)?\\n([\\s\\S]*?)```/)\n      if (match) setArtifact({ lang: match[1] ?? \"tsx\", code: match[2] })\n    },\n  })\n\n  return (\n    <div className=\"flex h-screen\">\n      {/* Chat panel */}\n      <div className=\"flex w-80 shrink-0 flex-col border-r border-border/40\">\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n          {messages.map((m) => (\n            <div key={m.id} className={cn(\"flex\", m.role === \"user\" ? \"justify-end\" : \"justify-start\")}>\n              <div\n                className={cn(\n                  \"max-w-[85%] rounded-xl px-3 py-2 text-sm\",\n                  m.role === \"user\"\n                    ? \"bg-foreground text-background rounded-br-sm\"\n                    : \"bg-muted/50 rounded-bl-sm\",\n                )}\n              >\n                {m.role === \"user\" ? m.content : m.content.replace(/```[\\s\\S]*?```/g, \"✦ Generated artifact\")}\n              </div>\n            </div>\n          ))}\n        </div>\n        <form onSubmit={handleSubmit} className=\"border-t border-border/40 p-3\">\n          <div className=\"flex gap-2 rounded-lg border border-border/40 bg-muted/20 px-3 py-2\">\n            <input\n              value={input}\n              onChange={handleInputChange}\n              placeholder=\"Ask Claude to build…\"\n              className=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground/40\"\n            />\n            <button type=\"submit\" disabled={isLoading} className=\"text-xs font-medium text-foreground/60 hover:text-foreground disabled:opacity-40\">\n              Send\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* Artifact panel */}\n      <div className=\"flex flex-1 flex-col overflow-hidden\">\n        <div className=\"flex items-center gap-0 border-b border-border/40 px-2\">\n          {([\"code\", \"preview\"] as const).map((t) => (\n            <button\n              key={t}\n              onClick={() => setTab(t)}\n              className={cn(\n                \"px-4 py-2.5 text-sm font-medium capitalize transition-colors\",\n                tab === t ? \"border-b-2 border-foreground text-foreground\" : \"text-muted-foreground\",\n              )}\n            >\n              {t}\n            </button>\n          ))}\n          {isLoading && (\n            <span className=\"ml-auto flex items-center gap-1.5 pr-3 text-xs text-muted-foreground\">\n              <span className=\"size-1.5 animate-pulse rounded-full bg-orange-400\" />\n              Generating…\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex-1 overflow-auto p-4\">\n          {tab === \"code\" && artifact && (\n            <pre className=\"font-mono text-xs leading-relaxed text-foreground/80\">\n              {artifact.code}\n            </pre>\n          )}\n          {tab === \"preview\" && (\n            <div className=\"flex h-full items-center justify-center text-sm text-muted-foreground/40\">\n              Sandboxed preview here\n            </div>\n          )}\n          {!artifact && !isLoading && (\n            <div className=\"flex h-full items-center justify-center text-sm text-muted-foreground/30\">\n              Ask Claude to build a component\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}"
    },
    {
      "path": "app/api/artifact/route.ts",
      "type": "registry:file",
      "target": "app/api/artifact/route.ts",
      "content": "import { streamText } from \"ai\"\nimport { anthropic } from \"@ai-sdk/anthropic\"\n\nexport async function POST(req: Request) {\n  const { messages } = await req.json()\n\n  const result = streamText({\n    model: anthropic(\"claude-sonnet-4-6\"),\n    system: `You are an expert React developer. When asked to build a component:\n1. Write clean, production-ready TypeScript/React code\n2. Use Tailwind CSS for styling\n3. Return ONLY a single fenced code block with the complete component\n4. Include a brief one-sentence description before the code block`,\n    messages,\n  })\n\n  return result.toDataStreamResponse()\n}"
    }
  ]
}