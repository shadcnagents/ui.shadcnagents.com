{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "basics-stream-text",
  "type": "registry:block",
  "description": "Stream text token-by-token using the Vercel AI SDK useCompletion hook.",
  "dependencies": [
    "ai",
    "@ai-sdk/openai",
    "@ai-sdk/react"
  ],
  "devDependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "app/page.tsx",
      "type": "registry:page",
      "target": "app/page.tsx",
      "content": "import type { Metadata } from \"next\"\nimport { StreamTextDemo } from \"@/components/stream-text-demo\"\n\nexport const metadata: Metadata = {\n  title: \"Stream Text — AI SDK Demo\",\n  description: \"Real-time text streaming with the Vercel AI SDK and useCompletion hook.\",\n}\n\nexport default function Page() {\n  return (\n    <main className=\"flex min-h-svh flex-col items-center justify-center bg-background px-4 py-12\">\n      <StreamTextDemo />\n    </main>\n  )\n}\n"
    },
    {
      "path": "app/layout.tsx",
      "type": "registry:page",
      "target": "app/layout.tsx",
      "content": "import type { Metadata } from \"next\"\nimport { Inter } from \"next/font/google\"\nimport type { ReactNode } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst inter = Inter({ subsets: [\"latin\"] })\n\nexport const metadata: Metadata = {\n  title: \"Stream Text — AI SDK Demo\",\n  description: \"Real-time text streaming with the Vercel AI SDK and useCompletion hook.\",\n}\n\nexport default function RootLayout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\" suppressHydrationWarning>\n      <body className={cn(\"min-h-svh bg-background font-sans antialiased\", inter.className)}>\n        {children}\n      </body>\n    </html>\n  )\n}\n"
    },
    {
      "path": "app/api/completion/route.ts",
      "type": "registry:file",
      "target": "app/api/completion/route.ts",
      "content": "import { streamText } from \"ai\"\nimport { openai } from \"@ai-sdk/openai\"\n\nexport async function POST(req: Request) {\n  try {\n    const { prompt } = await req.json()\n\n    if (!prompt || typeof prompt !== \"string\") {\n      return Response.json({ error: \"prompt is required\" }, { status: 400 })\n    }\n\n    const result = streamText({\n      model: openai(\"gpt-4o\"),\n      prompt,\n    })\n\n    return result.toDataStreamResponse()\n  } catch (error) {\n    console.error(\"[completion]\", error)\n    return Response.json({ error: \"Failed to stream text\" }, { status: 500 })\n  }\n}\n"
    },
    {
      "path": "components/stream-text-demo.tsx",
      "type": "registry:component",
      "target": "components/stream-text-demo.tsx",
      "content": "\"use client\"\n\nimport { useCompletion } from \"@ai-sdk/react\"\n\nexport function StreamTextDemo() {\n  const { completion, input, handleInputChange, handleSubmit, isLoading, error } =\n    useCompletion({ api: \"/api/completion\" })\n\n  return (\n    <div className=\"mx-auto w-full max-w-lg space-y-6\">\n      <div>\n        <h1 className=\"text-xl font-semibold tracking-tight\">Stream Text</h1>\n        <p className=\"mt-1 text-sm text-muted-foreground\">\n          Tokens stream back in real-time as they are generated.\n        </p>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"flex gap-2\">\n        <input\n          value={input}\n          onChange={handleInputChange}\n          placeholder=\"Ask something…\"\n          className=\"flex-1 rounded-lg border border-input bg-transparent px-3 py-2 text-sm outline-none placeholder:text-muted-foreground/60 focus-visible:ring-2 focus-visible:ring-ring\"\n        />\n        <button\n          type=\"submit\"\n          disabled={isLoading || !input.trim()}\n          className=\"inline-flex h-9 items-center justify-center rounded-lg bg-primary px-4 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-50\"\n        >\n          {isLoading ? (\n            <span className=\"flex items-center gap-2\">\n              <svg className=\"size-4 animate-spin\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\" />\n              </svg>\n              Streaming\n            </span>\n          ) : (\n            \"Send\"\n          )}\n        </button>\n      </form>\n\n      {error && (\n        <div className=\"rounded-lg border border-destructive/30 bg-destructive/5 px-3 py-2.5\">\n          <p className=\"text-sm text-destructive\">{error.message}</p>\n        </div>\n      )}\n\n      {completion && (\n        <div className=\"rounded-lg border bg-muted/40 px-4 py-3\">\n          <p className=\"mb-2 text-[13px] font-medium text-muted-foreground/60\">\n            {isLoading ? \"Streaming…\" : \"Response\"}\n          </p>\n          <p className=\"text-sm leading-relaxed text-foreground/85\">\n            {completion}\n            {isLoading && (\n              <span className=\"ml-0.5 inline-block h-4 w-0.5 animate-pulse bg-foreground/60 align-middle\" />\n            )}\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n"
    }
  ]
}